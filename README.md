# 레이싱 게임 - 극적인 추격전 (Racing Game - Dramatic Chase)

## 개요 (Overview)

이 프로젝트는 HTML, CSS, 순수 JavaScript(Vanilla JS)로 구현된 간단한 웹 기반 자동차 경주 시뮬레이션 게임입니다. 여러 대의 자동차가 타원형 트랙에서 정해진 랩 수를 완주하기 위해 경쟁합니다.

특히 v4에서는 **"극적인 추격전"** 요소를 강화하여, 선두 차량에게는 약간의 페널티 확률을, 후미 차량에게는 따라잡을 수 있는 부스트 기회를 제공하여 레이스의 긴장감과 예측 불가능성을 높였습니다.

## 주요 기능 (Features)

* **동적 자동차 생성:** 게임 시작 시 2대에서 8대까지 참가자 수를 설정할 수 있습니다.
* **개성 있는 자동차:** 각 자동차는 고유한 색상, 이름, 그리고 무작위로 설정된 약간 다른 최고 속도 및 가속도 성능을 가집니다.
* **타원형 트랙 시뮬레이션:** 자동차는 계산된 타원 경로를 따라 이동합니다.
* **랩 카운팅 및 순위:** 선두 차량 기준으로 현재 랩 수를 표시하고, 완주한 차량의 순위를 실시간으로 보여줍니다.
* **극적인 추격전 시스템 (Catch-up & Leader Penalty):**
    * **선두 페널티:** 선두 차량은 약간 높은 확률로 속도 저하 이벤트(슬로우다운)를 겪을 수 있습니다. (다른 차와 격차가 벌어질수록 확률 증가)
    * **후미 추격 부스트:** 뒤처진 차량은 선두와의 거리에 따라 속도 증가 이벤트(부스트)를 얻을 확률이 높아집니다. (거리가 멀수록 확률 및 부스트 강도 증가)
    * 이를 통해 레이스 중 순위 변동성을 높여 재미를 더합니다.
* **무작위 이벤트:** 레이스 중 무작위로 부스트 또는 슬로우다운 효과가 발생하여 예측 불가능성을 더합니다. (지속 시간 및 강도 랜덤)
* **시각 효과:**
    * 부스트 시 노란색 강조 효과 및 미미한 펄스 애니메이션 (`boost` 클래스).
    * 슬로우다운 시 투명도 감소 및 붉은 그림자 효과 (`slowdown` 클래스).
    * 선두/추격 상황에 따른 미묘한 시각적 표시 (선택적, `leader-penalty`, `catchup-boost` 클래스).
    * 코너링 시 약간의 기울기(`skewX`).
    * 속도에 따른 차체 흔들림 효과(`translateY`).
    * 완주 시 순위에 따른 메달(🥇🥈🥉) 표시 및 우승자 강조 애니메이션(펄스).
* **간단한 UI:** 게임 시작 버튼, 플레이어 수 선택, 레이스 정보(현재 상황, 순위), 최종 결과 표시.

## 사용법 (How to Use)

1.  위의 HTML 코드를 복사합니다.
2.  텍스트 편집기(메모장, VSCode 등)를 열고 코드를 붙여넣습니다.
3.  파일을 `.html` 확장자로 저장합니다 (예: `racing_game_v4.html`).
4.  저장된 HTML 파일을 웹 브라우저(Chrome, Firefox, Edge 등)에서 엽니다.
5.  '참가자 수'를 선택하고 '게임 시작' 버튼을 누르면 레이스가 시작됩니다.

별도의 서버 설정이나 빌드 과정이 필요하지 않습니다.

## 사용된 기술 (Technologies Used)

* **HTML:** 게임의 기본 구조 및 요소 배치.
* **CSS:** 게임 요소 스타일링, 레이아웃, 시각 효과 및 애니메이션 정의.
* **JavaScript (Vanilla JS):**
    * 게임 로직 전체 (자동차 생성, 이동, 상태 관리, 랩 계산).
    * 물리 시뮬레이션 (가속도, 속도, 경로 추적).
    * Catch-up 및 무작위 이벤트 로직 구현.
    * DOM 조작 (자동차 위치 업데이트, UI 텍스트 변경, 클래스 변경을 통한 시각 효과 제어).
    * `requestAnimationFrame`을 사용한 부드러운 애니메이션 루프.

## 코드 하이라이트 (Code Highlights)

* **`getPath()` & `calculatePathLength()` & `getSegmentLengths()`:** 트랙 요소의 크기를 기반으로 동적으로 타원 경로 좌표를 계산하고, 경로 및 각 세그먼트의 길이를 미리 계산하여 성능을 최적화합니다.
* **`updateGame()`:** 메인 게임 루프 함수. `requestAnimationFrame`을 사용하여 각 프레임마다 자동차의 상태(속도, 위치, 효과 등)를 업데이트하고 화면에 렌더링합니다.
* **Catch-up 로직:** `updateGame()` 내에서 선두 차량(`leadingCar`)을 판별하고, 각 차량과의 거리(`distanceBehindLeader`)를 계산하여 부스트/슬로우다운 이벤트 발생 확률과 강도를 동적으로 조절합니다.
* **LERP (Linear Interpolation):** 자동차의 시각적 위치(`car.x`, `car.y`)를 목표 위치(`car.targetPosition`)로 부드럽게 이동시키는 데 사용됩니다 (`lerpFactor`).
* **CSS 클래스 활용:** JavaScript는 자동차의 상태(부스트, 슬로우다운 등)에 따라 CSS 클래스를 추가/제거하고, 실제 시각 효과는 CSS에서 처리하여 역할을 분리합니다.
